<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="{{url_for('static', filename='css/painel.css')}}">
  <script defer src="{{url_for('static', filename='js/function.js')}}"></script>
  <title>Document</title>
</head>
<body>
  <section class="painel">
    <div class="center">
    <h1>ğŸš€ Dashboard EvoluteCode</h1>
      <div class="user-info">
        <p>OlÃ¡, <strong>{{ usuario }}</strong>!</p>
        <a href="{{ url_for('logout') }}" class="btn-logout">Sair</a>
      </div>

    <div class="stats">

      <div class="stat-card">
        <h3>ğŸ“Š Total de Leads</h3>
        <p class="stat-number">{{ leads| length }}</p>
      </div>

       <div class="stat-card">
       <h3>ğŸ†• Novos</h3>
        <p class="stat-number">{{ stats.novos }}</p>
      </div>

      <div class="stat-card">
         <h3>ğŸ“ Contatados</h3>
        <p class="stat-number">{{ stats.contatados }}</p>
      </div>
      <div class="stat-card">
       <h3>âœ… Fechados</h3>
        <p class="stat-number">{{ stats.fechados }}</p>
      </div>
      <div class="stat-card">
        <h3>ğŸ“ Em Proposta</h3>
        <p class="stat-number">{{ stats.em_proposta }}</p>
     </div>
      <div class="stat-card">
        <h3>âŒ Perdidos</h3>
        <p class="stat-number">{{ stats.perdidos }}</p>
      </div>
      <div class="stat-card">
        <h3>ğŸ’° Valor Total</h3>
        <p class="stat-number">R$ {{ "%.2f"|format(stats.valor_total) }}</p>
      </div>


    </div>


  <table>
    <tr>
      <th>Data</th>
      <th>Nome</th>
      <th>Email</th>
      <th>Status</th>  <!-- âœ… NOVO -->
      <th>Prioridade</th>  <!-- âœ… NOVO -->
      <th>Valor Est.</th>  <!-- âœ… NOVO -->
      <th>Mensagem</th>
      <th>AÃ§oes</th>
    </tr>
    <tbody>
    {% for lead in leads %}
    <tr>
      <td>{{ lead.data }}</td>
      <td>{{ lead.nome }}</td>
      <td><a href="mailto:{{ lead.email }}">{{ lead.email }}</a></td>

      <!-- âœ… NOVO: Status com cor -->
      <td>
        <span class="badge badge-{{ lead.status|default('novo') }}">
          {{ lead.status|default('novo')|capitalize }}
        </span>
      </td>

      <!-- âœ… NOVO: Prioridade -->
      <td>
        <span class="badge badge-prioridade-{{ lead.prioridade|default('media') }}">
          {{ lead.prioridade|default('media')|capitalize }}
        </span>
      </td>

      <!-- âœ… NOVO: Valor estimado -->
      <td>R$ {{ "%.2f"|format(lead.valor_estimado|default(0)) }}</td>

      <td>{{ lead.mensagem }}</td>
      <td>
        <!-- âœ… NOVO: BotÃ£o Ver Detalhes -->
        <a href="{{ url_for('visualizar_lead', lead_id=lead._id) }}" class="btn-view">ğŸ‘ï¸ Ver</a>

        <a href="{{ url_for('editar_lead', lead_id=lead._id) }}" class="btn-edit">âœï¸ Editar</a>

       <a href="#" class="delete-link" data-lead-id="{{ lead._id }}">ğŸ—‘ï¸ Deletar</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
  </table>

    </div>
  </section>


</body>
</html>
